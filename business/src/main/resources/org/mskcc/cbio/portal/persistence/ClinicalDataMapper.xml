<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.mskcc.cbio.portal.persistence.ClinicalDataMapper">

<resultMap id="ClinicalDataResult" type="DBClinicalData">
    <result property="attr_id" column="ATTR_ID"/>
    <result property="attr_val" column="ATTR_VALUE"/>
    <result property="case_id" column="INTERNAL_ID"/>
</resultMap>


<select id="byInternalCaseId" resultMap="ClinicalDataResult" parameterType="list">
    select * from clinical_patient
    where INTERNAL_ID in
    <foreach item="item" collection="ids" open="(" separator="," close=")">
        #{item}
    </foreach>
</select>

<select id="byInternalStudyId" resultMap="ClinicalDataResult" parameterType="list">
    select * from clinical_patient
    where INTERNAL_ID in
    (select distinct INTERNAL_ID from patient where CANCER_STUDY_ID in
        <foreach item="item" collection="ids" open="(" separator="," close=")">
            #{item}
        </foreach>
    )
</select>
    
</mapper>